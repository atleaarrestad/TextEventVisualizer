@using System.Collections.Generic
@using Components.Tabs

<div class="tab-set">
    <ul class="nav nav-tabs">
        @foreach (var tab in Tabs)
        {
            <li class="nav-item">
                <a class="nav-link @tab.ActiveClass" @onclick="() => ActivateTab(tab)">
                    @tab.Title
                </a>
            </li>
        }
    </ul>
    <div class="tab-content">
        <CascadingValue Value="this">
            @ChildContent
        </CascadingValue>
    </div>
</div>


@code {
    [Parameter]
    public RenderFragment ChildContent { get; set; }

    private List<Tab> Tabs = new List<Tab>();

    internal void AddTab(Tab tab)
    {
        if (Tabs.Count == 0)
        {
            tab.IsActive = true;
        }

        Tabs.Add(tab);
        StateHasChanged();
    }

    private void ActivateTab(Tab tabToActivate)
    {
        foreach (var tab in Tabs)
        {
            tab.IsActive = false;
        }

        tabToActivate.IsActive = true;
    }
}
